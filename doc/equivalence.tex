\documentclass{ijuc}
\usepackage[pdftex]{graphics}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{hyperref}

\begin{document}

\title{Combinatorial approach to counting equivalence classes in 1D and 2D cellular automata}
\author{Iztok Jeras\inst{1}\email{iztok.jeras@rattus.info}}
\institute{Faculty of Computer and Information Science, University of Ljubljana, Slovenia}
\def\received{Received 17 December 2004; In final form 1 April 2005}

\maketitle

\begin{abstract}
There is much more theoretical research on 1D cellular automata compared to 2D.
While not the only reason one of the arguments given is that the number of
available rules for a common 2D neighborhood is too large for a comprehensive
analysis. This issue can be mitigated by focusing on the smallest 2D neighborhoods
(trid and quad) and by grouping rules into equivalence classes. This article
gives an algebraic combinatorial solution to counting equivalence classes.
\end{abstract}

\keywords{cellular automata, combinatorics, equivalence classes, congruence operations}

\section{Introduction}

The focus of theoretical research is usually the simplest possible version of a system.
For 1D CA elementary rules are the simplest which exhibit not trivial behavior. Rule
equivalence has been used by many authors to organize 256 elementary CA rules into 88
equivalence classes. Representative rules from each class were then observed and described.
This approach found the most interesting rules which were then further analyzed. Rule 110
is a good example.

The same approach was never applied to 2D CA. For example most studied 2D rule is Game of Life.
It is based on a Moore neighborhood is binary cells. There are $2^{2^9}=2^512$ possible rules,
too many for a comprehensive analysis of the entire rule space. The von Neumann neighborhood
with $2^{2^5}=2^32$ rules is still impractical, and there is no rule with this neighborhood on
a binary lattice, whish would receive as much attention as Game of Life. While this two
neighborhoods were the focus of 2D CA research till recently, there are two simpler neighborhoods
named quad and trid which were popularized by Tommaso Toffoli only in 2008 using the QUAD prize competition.
The aim of the QUAD prize was to find a computation-universal 2-state cellular automaton on a 2-dimensional,
2Ã—2-neighborhood. Edward Powley proved computational universality on an even smaller neighborhood, the trid.

The focus of my CA research are preimages. On 1D CA de Bruijn diagrams are the main tool
used for this research. The size of this diagrams depends on the size of the rue space.
While once the algorithms for calculating preimages are known, the ability to compute
them is only limited by computer memory, the research of such algorithms usually requires
the ability of the researcher to model such problems with mathematical notations like
graphs and matrices. Only with 2D neighborhoods as small as quad and trid such representations
become small enough for theoretical analysis with the help of visual representations.

The purpose of this article is to calculate the number of equivalence classes for a few small
neighborhoods on a binary lattice (2D and 3D). The number of interesting rules can be further
reduced by removing rules which can be represented with a smaller neighborhood. This are rules
where one of the neighbors is not used in the local transition function, and higher order rules,
those that can be represented with multiple steps of a smaller neighborhood rule.

??? Most research on CA was recently done by Hidenosuke Nishio \cite{DBLP:journals/jca/Nishio12},
\cite{DBLP:journals/fuin/Nishio10}, \cite{DBLP:conf/ncma/Nishio09}, \cite{DBLP:conf/automata/NishioW08}.

Tommaso Toffoli
\url{http://uncomp.uwe.ac.uk/automata2008/files/quad.pdf}

Edward Powley
\url{http://uncomp.uwe.ac.uk/automata2008/files/quadprize_powley.pdf}


\section{Formalization}



\section{Definition of Equivalence}

Two rules are equivalent, if a transformation for the CA state exists, such that each CA
current-next state pair for the current rule gets transformed into a current-next state pair
for the other rule.

State transition graphs for equivalent rules are of the same shape, and a transformation exists
which maps each state in one graph to a state at the same position in the graph for the other rule.

There are generalizations to this definition. For example a rule and it second order rule can be thought as equivalent.
(rule performing the same global transition in one step as the original rule achieves in two steps.

\subsection{1D problem}

Equivalence groups for elementary CA are long known. What is missing is a general algebraic solution.

\subsubsection{Symmetries}

There is a set of known symmetries or congruence operations on a given CA state.
For 1D CA this are reflection and permutation. 

\subsubsection{Counting neighborhood values}

The set of all distinct neighborhood values $\mathbb{M}$ for a given neighborhood size $m$ and
number of cell states $k$ is:

\[ \mathbb{M} = \left\{ n : \right\} \]
\[ \vert \mathbb{M} \vert = k^m \]

Neighborhood values can be organized into subsets depending on their invariance to congruence operations.

There are neighborhood values which are invariant to reflection. This are neighborhoos for which the
left half is the mirror is the mirror image of the right half. There are as many such neighborhood
values as there are possible values for a half sized neighborhood. For odd neighborhood sizes the middle
cell is always a mirror image of itself.

\[ \mathbb{M}_\mathrm{ref} = \left\{ \forall n \in \mathbb{M} : \phi_\mathrm{ref}(n) = n \right\} \]
\[ \vert \mathbb{M}_\mathrm{ref} \vert = \left\{ 
  \begin{array}{ll}
    {k^{m/2+1}} & \quad \textrm{if $m$ is odd }\\
    {k^{m/2  }} & \quad \textrm{if $m$ is even}
  \end{array} \right.
\]

There are no neighborhood values which are invariant to permutation.

\[ \mathbb{M}_\mathrm{per} = \left\{ \forall n \in \mathbb{M} : \phi_\mathrm{per}(n) = n \right\} = \varnothing \]
\[ \vert \mathbb{M}_\mathrm{per} \vert = 0 \]

There are neighborhood values which are invariant after both reflection and permutation have been applied.

\[ \mathbb{M}_\mathrm{ref,per} = \left\{ \forall n \in \mathbb{M} : \phi_\mathrm{per}(\phi_\mathrm{ref}(n)) = n \right\} \]
\[ \vert \mathbb{M}_\mathrm{ref,per} \vert = \left\{ 
  \begin{array}{ll}
    {0        } & \quad \textrm{if $m$ is odd }\\
    {k^{m/2  }} & \quad \textrm{if $m$ is even}
  \end{array} \right.
\]

\subsubsection{Counting rules}

Rules which are invariant to reflection. The calculation is based on the number of reflection invariant neightorhood values.
The local transition function can take any value for \(\mathbb{M}_\mathrm{ref}\) while for the rest the same value must be used
for the the neighborhood value and its reflection.

\[ \mathbb{R}_\mathrm{ref} = \left\{ \forall r \in \mathbb{R} : \phi_\mathrm{ref}(r) = r \right\} \]
\[ \vert \mathbb{R}_\mathrm{ref} \vert = k^{ \vert \mathbb{M}_\mathrm{ref} \vert + ( \vert \mathbb{M} \vert - \vert \mathbb{M}_\mathrm{ref} \vert ) / 2 } \]

Rules which are invariant to permutation.

\[ \mathbb{R}_\mathrm{per} = \left\{ \forall r \in \mathbb{R} : \phi_\mathrm{per}(r) = r \right\} \]
k=2
\[ \vert \mathbb{R}_\mathrm{per} \vert = k^{\vert \mathbb{M} \vert / k} \]

Rules which are invariant to reflection and permutation applied at the same time.

\[ \mathbb{R}_\mathrm{ref,per} = \left\{ \forall n \in \mathbb{R} : \phi_\mathrm{per}(\phi_\mathrm{ref}(r)) = r \right\} \]
k=2
\[ \vert \mathbb{R}_\mathrm{ref,per} \vert = k^{\vert \mathbb{M} \vert / k} \]

Then intersections of the above sets must be counted.

Permutation limits the free choice of mappings to half neighborhood values, mirroring further reduces free choice to 

\[ \mathbb{R}_\mathrm{ref} \bigcap \mathbb{R}_\mathrm{per} = \left\{ \forall r \in \mathbb{R} : {\phi_\mathrm{ref}(r) = r} \wedge {\phi_\mathrm{per}(r) = r} \right\} \]
k=2
\[ \vert \mathbb{R}_\mathrm{ref} \vert = k^{ \vert \mathbb{M}_\mathrm{ref} \vert + ( \vert \mathbb{M} \vert - \vert \mathbb{M}_\mathrm{ref} \vert ) / 2 } \]


\subsection{2D problem}

\subsubsection{Symetries}

Symmetries for 2D CA are rotation, reflection and permutation.

\section{Conclusion}

With elementary cellular automata the approach was to observe the evolution of
each rule and to further study the ones which exhibit interesting behavior.
A similar approach can be taken with 2D trid and quad. With an appropriate filter
this evolutions could be made into a video or a 3D image. An example filter would
convert each 3x3 neighborhood pattern probabilities into a color palette. For trid
a single person could do the review, while for quad crowd-sourcing could be used.

I hope will help further theoretical research into 2D CA.

\bibliography{equivalence}

\appendix 

\end{document}
